<html>
    <head>
        <meta charset="utf-8">
        <title>imgviewer</title>

        <style>
            * {
                margin: 0px;
            }

            body {
                background-color: rgb(25, 25, 25);
                color: aliceblue;
                overflow-y: hidden; /* Hide vertical scrollbar */
                overflow-x: hidden; /* Hide horizontal scrollbar */
                text-align: center;
            }

            .imagelayer {
                position: fixed;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                justify-content: center;
                object-fit: contain;
                visibility: hidden;
            }

        </style>
    </head>
    <body>

        <img class="imagelayer"/>
        <img class="imagelayer"/>
        <img class="imagelayer"/>
        <img class="imagelayer"/>
        <img class="imagelayer"/>

        <script>

            function dirseek(param) {
                let xmlhttp = new XMLHttpRequest();
                let url=`dirseek.php?x=${param}`;
                xmlhttp.open("GET", url, false);
                xmlhttp.send(null);
                return xmlhttp.responseText;
            };

            const urlStr = window.location.href;
            const url = new URL(urlStr);
            const urlParams = url.searchParams;
            const parampath = urlParams.get('p');
            const paramname = urlParams.get('t');
            let iamgelayers = document.querySelectorAll('.imagelayer');
            let filelist;

            iamgelayers.forEach(element => {

            });

            function image_nav_next()
            {

            }

            function image_nav_prev()
            {

            }

            document.addEventListener("keydown", (param) => {
                console.log(param.key)

                switch(param.key)
                {
                    case 'ArrowLeft':

                        break;
                    case 'ArrowRight':

                        break;
                }
            });

            console.log(`parampath - ${parampath}`);
            console.log(`paramname - ${paramname}`);

            if(parampath != null && paramname != null)
            {
                const jsondata=JSON.parse(dirseek(parampath));

                if(jsondata['ret'])
                {
                    filelist = jsondata['data'];

                    for(let i=0;i<iamgelayers.length;i++)
                    {
                        iamgelayers[i].src = `${parampath}/${filelist[i]["d"]}`
                    }
                }
                else
                {
                    // Fail
                }
            }
            else
            {

            }

        </script>


    </body>
</html>